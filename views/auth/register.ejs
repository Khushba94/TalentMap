<%- include('../layouts/header') %>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/style.css" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<div class="container-fluid register-wrapper">
  <div class="row w-100">

    <!-- Left illustration -->
    <div class="col-lg-6 d-none d-lg-flex align-items-center justify-content-center left-illustration">
      <img src="/images/login_img.jpg" alt="Registration Illustration" />
    </div>

    <!-- Right form -->
    <div class="col-lg-6 d-flex justify-content-center align-items-center">
      <form action="/auth/register" method="POST" class="register-box">
        <h2>Welcome!</h2>

        <!-- Role Tabs -->
        <ul class="nav nav-tabs mt-2 mb-3" id="roleTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="student-tab" data-bs-toggle="tab" data-bs-target="#student" type="button" role="tab">
              Student
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="recruiter-tab" data-bs-toggle="tab" data-bs-target="#recruiter" type="button" role="tab">
              Recruiter
            </button>
          </li>
        </ul>

        <!-- Hidden input to store selected role -->
        <input type="hidden" name="role" id="roleInput" value="student" />

        <div class="tab-content" id="roleTabsContent">
          <div class="tab-pane fade show active" id="student" role="tabpanel">
            <p class="text-muted small">You will register as a student.</p>
          </div>
          <div class="tab-pane fade" id="recruiter" role="tabpanel">
            <p class="text-muted small">You will register as a recruiter.</p>
          </div>
        </div>

        <label for="name">Your name</label>
        <input type="text" name="name" id="name" required />

        <label for="email">Your e-mail</label>
        <input type="email" name="email" id="email" required />

        <label for="password">Create password</label>
        <input type="password" name="password" id="password" required oninput="updateStrength(this.value)" />

        <div class="strength-bar">
          <div id="strengthFill" class="strength-fill bg-danger" style="width: 0%;"></div>
        </div>


        <button type="submit" class="btn btn-create">Create account</button>
        <a href="/auth/login" class="btn btn-outline-primary btn-outline">Sign in</a>
      </form>
    </div>

  </div>
</div>

<script>
  function updateStrength(password) {
    const fill = document.getElementById('strengthFill');
    let strength = 0;
    if (password.length > 5) strength += 25;
    if (/[A-Z]/.test(password)) strength += 25;
    if (/[0-9]/.test(password)) strength += 25;
    if (/[^A-Za-z0-9]/.test(password)) strength += 25;

    fill.style.width = strength + '%';
    fill.className = 'strength-fill';
    if (strength < 50) fill.classList.add('bg-danger');
    else if (strength < 75) fill.classList.add('bg-warning');
    else fill.classList.add('bg-success');
  }

  // Update hidden role input when tabs change
  document.getElementById('student-tab').addEventListener('click', () => {
    document.getElementById('roleInput').value = 'student';
  });

  document.getElementById('recruiter-tab').addEventListener('click', () => {
    document.getElementById('roleInput').value = 'recruiter';
  });
</script>

<%- include('../layouts/footer') %>
